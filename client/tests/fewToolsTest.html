<!doctype html>
<html>
	<head>
		<title>Few Tools Test</title>
		<script src="jsunit/app/jsUnitCore.js"></script>
		<script src="../js/jq.js"></script>
		<script src="../js/settings.js"></script>
		<script>
			var main = {
				registerTool: function(){},
				tools: {
					toolbarWidth: 0
				}
			}; // just catch, we don't need this
		</script>
		<script src="../js/Tools.ptt.js"></script>
		<script src="../js/tools/a.Draw.ptt.js"></script>
		<script src="../js/tools/b.Text.ptt.js"></script>
		<script src="../js/tools/c.Shape.ptt.js"></script>
		<script src="../js/tools/d.Table.ptt.js"></script>
		<script>
			function testToolInterfaces() {
				var objNames = ["Draw", "Text", "Shape", "Table"];
				for (var objX in objNames) {
					var objName = objNames[objX];
					
					assertEquals("Check if constructorfunction exists", typeof window[objName], "function");
					
					var obj = new window[objName](),
						foundSettings = 0;
					
					if (obj.toolSettings) {
						for (var x in obj.toolSettings) {
							assertNotUndefined(objName + ": All tools need icons.", obj.toolSettings[x].icon);
							if (obj.toolSettings[x].settings) {
								for (var y in obj.toolSettings[x].settings) {
									foundSettings++;
									assertNotUndefined(objName + ": All settings need a type.", obj.toolSettings[x].settings[y].type);
								}
							}
						}
					} else fail(objName + ": No toolSettings");
					
					if (foundSettings) {
						assertNotUndefined(objName + ": Need settings object", obj.settings);
						assertEquals(objName + ": number of settings must be the same as settingValues", foundSettings, Object.keys(obj.settings).length);
					} else assertUndefined(objName + ": Can't have settings object", obj.settings);
					
					// some required functions
					assertEquals(objName + ": method initEvents is required", typeof obj.initEvents, "function");
					assertEquals(objName + ": method broadcast is required", typeof obj.broadcast, "function");
					assertEquals(objName + ": method redraw is required", typeof obj.redraw, "function");
				}
			}
		</script>
	</head>
	<body></body>
</html>